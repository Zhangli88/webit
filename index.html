<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Webit by fcten</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Webit</h1>
      <h2 class="project-tagline">High Performance HTTP Server</h2>
      <a href="https://github.com/fcten/webit" class="btn">View on GitHub</a>
      <a href="https://github.com/fcten/webit/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/fcten/webit/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="webit" class="anchor" href="#webit" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Webit</h1>

<p>Webit 是一款使用 ANSI C 语言编写的高性能 HTTP 服务端程序。</p>

<p>Webit 目前只支持 GNU/Linux 平台，并且可能无法在 Linux 2.6 以及更老的内核上运行。</p>

<h2>
<a id="编译-webit" class="anchor" href="#%E7%BC%96%E8%AF%91-webit" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>编译 Webit</h2>

<p>编译 Webit 需要安装 openssl (&gt;=1.0.2，用以支持 HTTPS)，zlib (&gt;=1.2.0.4，用以支持 GZIP)。您可以使用包管理工具安装或者下载源代码编译安装</p>

<pre><code>centos/redhat# yum install openssl-devel openssl zlib-devel zlib
debian/ubuntu# apt-get install libssl-dev openssl zlib1g-dev zlib1g
</code></pre>

<h2>
<a id="使用-webit" class="anchor" href="#%E4%BD%BF%E7%94%A8-webit" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>使用 Webit</h2>

<h3>
<a id="运行" class="anchor" href="#%E8%BF%90%E8%A1%8C" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>运行</h3>

<p>使用当前工作路径下的配置文件 (webit.conf) 启动</p>

<pre><code>./webit
</code></pre>

<p>使用指定的配置文件启动</p>

<pre><code>./webit -c /opt/webit/1039.conf
</code></pre>

<p>注意，您可以使用多个配置文件在同一台服务器上启动多个 webit 实例。但这些配置文件中设定的端口必须各不相同。</p>

<h3>
<a id="停止" class="anchor" href="#%E5%81%9C%E6%AD%A2" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>停止</h3>

<p>首先找到 master 进程的 pid，例如</p>

<pre><code>root@localhost:~# ps -ef | grep webit
root      118675   1553  0 14:36 ?        00:00:00 webit: master process (/opt/webit/webit.conf)
www-data  118676 118675  0 14:36 ?        00:00:00 webit: worker process
</code></pre>

<p>然后执行</p>

<pre><code>kill 118675
</code></pre>

<p>注意，此时 worker 进程并不会立刻退出，而是停止 accept 新连接。直到所有已建立的连接处理完毕并正常关闭后， worker 进程才会退出。这最长需要等待 keep-alive-timeout 的时间。</p>

<p>注意，直接对 worker 进程执行 kill 并不能关闭 webit。master 进程会在 worker 进程退出后立即重新 fork 出一个 worker 进程。</p>

<h3>
<a id="重启" class="anchor" href="#%E9%87%8D%E5%90%AF" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>重启</h3>

<p>首先找到 master 进程的 pid，然后执行</p>

<pre><code>kill -USR2 118675 &amp;&amp; kill 118675
</code></pre>

<p>执行该命令后会产生新的 master 进程和 worker 进程。旧进程会在所有已建立的连接处理完毕并正常关闭后退出。</p>

<h3>
<a id="更新二进制文件" class="anchor" href="#%E6%9B%B4%E6%96%B0%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>更新二进制文件</h3>

<p>操作方法与重启相同。</p>

<p>注意，为了在不关闭程序的情况下更新二进制文件，您总是应当使用符号链接来启动 webit。</p>

<h2>
<a id="授权协议" class="anchor" href="#%E6%8E%88%E6%9D%83%E5%8D%8F%E8%AE%AE" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>授权协议</h2>

<p>Webit 遵循 GPL v2 协议发布。</p>

<ul>
<li><a href="http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt">http://www.gnu.org/licenses/old-licenses/gpl-2.0.txt</a></li>
</ul>

<h2>
<a id="获取-webit" class="anchor" href="#%E8%8E%B7%E5%8F%96-webit" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>获取 Webit</h2>

<ul>
<li><a href="https://github.com/fcten/webit">https://github.com/fcten/webit</a></li>
<li><a href="http://git.oschina.net/fcten/Webit">http://git.oschina.net/fcten/Webit</a></li>
</ul>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/fcten/webit">Webit</a> is maintained by <a href="https://github.com/fcten">fcten</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
